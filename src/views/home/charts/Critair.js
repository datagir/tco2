import React, { useContext } from 'react'
import styled from 'styled-components'

import useTruckDefaultSettings from 'hooks/useTruckDefaultSettings'
import SearchContext from 'utils/SearchContext'
import List from './critair/List'

const Wrapper = styled.div`
  position: relative;
  margin-bottom: 4rem;
  padding: 1.5rem;
  background-color: ${(props) => props.theme.colors.secondLight};
  border-radius: 1rem;

  ${(props) => props.theme.mq.small} {
    padding: 1rem;
  }
`
const Title = styled.h2`
  text-align: center;
`
const Columns = styled.div`
  display: flex;
  gap: 1.5rem;

  ${(props) => props.theme.mq.small} {
    flex-direction: column;
  }
`
const Column = styled.div`
  flex: 1;
  padding: 1rem 1.5rem;
  text-align: center;
  background-color: ${(props) => props.theme.colors.footerLight};
  border-radius: 1rem;
`

export default function Critair() {
  const { data } = useTruckDefaultSettings()

  const { vehicleCategory } = useContext(SearchContext)

  if (!data || !vehicleCategory) {
    return null
  }

  const vehicleTechnologiesAvailability =
    data.output.vehicleCategoriesDescriptions
      .find((category) => category.vehicleCategory === vehicleCategory)
      ?.vehicleTechnologiesAvailability.map((technologie) => ({
        ...technologie,
        ...data.output.vehicleTechnologiesDescriptions.find(
          (description) =>
            description.vehicleTechnology === technologie.vehicleTechnology
        ),
      }))

  return vehicleTechnologiesAvailability ? (
    <Wrapper>
      <Title>Vignettes Critâ€™Air</Title>
      <Columns>
        <Column>
          <svg
            width='58'
            height='59'
            viewBox='0 0 58 59'
            fill='none'
            xmlns='http://www.w3.org/2000/svg'
          >
            <path
              d='M29 58.01C45.016 58.01 58 45.026 58 29.01C58 12.993 45.016 0.0100098 29 0.0100098C12.984 0.0100098 0 12.993 0 29.01C0 45.025 12.984 58.01 29 58.01Z'
              fill='white'
            />
            <path
              d='M29 57.18C44.559 57.18 57.172 44.568 57.172 29.01C57.172 13.45 44.559 0.836975 29 0.836975C13.441 0.837975 0.828979 13.45 0.828979 29.009C0.828979 44.568 13.44 57.181 29 57.181V57.18Z'
              fill='#009650'
            />
            <path
              d='M29 48.6C39.82 48.6 48.591 39.83 48.591 29.01C48.591 18.19 39.82 9.41699 29 9.41699C18.18 9.41699 9.40796 18.189 9.40796 29.009C9.40796 39.829 18.18 48.601 29 48.601V48.6Z'
              fill='#5CBF8F'
            />
            <path
              d='M29.0001 47.772C39.3631 47.772 47.7631 39.372 47.7631 29.009C47.7631 18.647 39.3631 10.246 29.0001 10.246C18.6371 10.246 10.2371 18.646 10.2371 29.009C10.2371 39.372 18.6371 47.772 29.0001 47.772Z'
              fill='white'
            />
            <path
              d='M25.042 19.073C28.232 18.963 30.992 20.253 33.599 21.868C35.9833 23.3622 38.3081 24.9494 40.568 26.626C41.4323 27.2648 42.1444 28.0872 42.653 29.034C43.639 30.957 42.894 33.064 40.898 34.099C39.902 34.519 38.878 34.865 37.832 35.135C37.6471 35.1954 37.4843 35.3092 37.364 35.462C37.0996 35.8713 36.7426 36.2126 36.3218 36.4583C35.9011 36.7039 35.4284 36.847 34.942 36.876C34.4553 36.9039 33.9689 36.816 33.5229 36.6194C33.0768 36.4228 32.6837 36.1231 32.376 35.745C32.1703 35.5081 31.8805 35.3604 31.568 35.333C29.4538 35.3008 27.3392 35.3008 25.225 35.333C24.9931 35.3421 24.773 35.4377 24.608 35.601C23.504 36.875 22.322 37.142 20.843 36.419C20.3309 36.1294 19.9209 35.6886 19.669 35.157C19.4166 34.6241 19.3342 34.0264 19.433 33.445C19.571 32.84 19.893 32.293 20.356 31.882C20.8173 31.4706 21.3962 31.2145 22.011 31.15C22.5286 31.0996 23.0501 31.1924 23.5187 31.4181C23.9872 31.6438 24.3848 31.9938 24.668 32.43C24.7242 32.5133 24.7969 32.5843 24.8814 32.6387C24.966 32.693 25.0608 32.7295 25.16 32.746C27.359 32.746 29.557 32.723 31.755 32.676C31.8471 32.6645 31.9359 32.6339 32.0156 32.5862C32.0953 32.5385 32.1642 32.4748 32.218 32.399C32.481 32.0359 32.8188 31.7333 33.2087 31.5118C33.5986 31.2903 34.0314 31.155 34.478 31.115C34.9247 31.0758 35.3745 31.1336 35.7968 31.2842C36.2192 31.4349 36.604 31.675 36.925 31.988C37.66 32.741 38.325 32.826 39.257 32.285C40.701 31.443 40.677 30.04 39.104 29.064C37.946 28.345 36.64 27.874 35.491 27.126C33.939 26.11 32.475 24.956 30.996 23.826C29.025 22.339 26.891 21.377 24.362 21.426C23.0782 21.5125 21.8445 21.9573 20.801 22.71C19.7547 23.4647 18.9398 24.4964 18.448 25.689C17.762 27.354 18.008 28.95 18.398 30.595C18.585 31.425 18.69 32.272 18.714 33.123C18.683 33.4485 18.5293 33.7499 18.284 33.966C18.206 34.035 17.714 33.842 17.59 33.653C16.9258 32.7286 16.3516 31.7427 15.875 30.709C15.2559 29.2587 15.1601 27.6382 15.604 26.125C16.382 23.712 17.575 21.59 19.995 20.317C21.5527 19.5022 23.284 19.0754 25.042 19.073Z'
              fill='#009650'
            />
          </svg>
          <List
            level='0'
            vehicleTechnologiesAvailability={vehicleTechnologiesAvailability}
          />
        </Column>
        <Column>
          <svg
            width='59'
            height='58'
            viewBox='0 0 59 58'
            fill='none'
            xmlns='http://www.w3.org/2000/svg'
          >
            <path
              d='M29.4 58C45.416 58 58.4 45.016 58.4 29C58.4 12.984 45.416 0 29.4 0C13.384 0 0.400024 12.984 0.400024 29C0.400024 45.016 13.384 58 29.4 58Z'
              fill='white'
            />
            <path
              d='M29.4 57.171C44.959 57.171 57.57 44.558 57.57 29C57.571 13.44 44.96 0.828003 29.4 0.828003C13.84 0.828003 1.229 13.441 1.229 29C1.229 44.558 13.841 57.171 29.399 57.171H29.4Z'
              fill='#794685'
            />
            <path
              d='M29.4 48.591C40.22 48.591 48.992 39.82 48.992 29C48.992 18.18 40.22 9.40802 29.4 9.40802C18.58 9.40802 9.80798 18.18 9.80798 29C9.80798 39.82 18.58 48.591 29.4 48.591Z'
              fill='#B48AB8'
            />
            <path
              d='M29.4 47.763C39.762 47.763 48.163 39.363 48.163 29C48.163 18.637 39.763 10.237 29.4 10.237C19.037 10.237 10.637 18.637 10.637 29C10.637 39.363 19.037 47.763 29.4 47.763Z'
              fill='#905F99'
            />
            <path
              d='M28.96 20.546C27.5731 21.2891 26.3013 22.2292 25.184 23.337C24.9959 23.2513 24.8213 23.1384 24.666 23.002C24.2692 22.5355 23.889 22.0552 23.526 21.562C23.4684 21.4939 23.4282 21.4129 23.4087 21.3259C23.3892 21.239 23.391 21.1485 23.414 21.0624C23.4369 20.9763 23.4804 20.897 23.5407 20.8312C23.6009 20.7655 23.6761 20.7154 23.76 20.685L29.046 17.564C29.173 17.484 29.314 17.429 29.462 17.402L34.555 17C35.022 16.966 35.255 17.195 35.307 17.659C35.4648 18.9625 35.405 20.2831 35.13 21.567C34.851 22.829 34.618 24.097 34.339 25.358C34.111 26.38 33.832 27.391 33.599 28.408C33.365 29.423 33.142 30.356 32.954 31.333C32.641 33.053 32.294 34.8 32.026 36.548C31.866 37.581 31.804 38.636 31.746 39.68C31.7571 39.7822 31.747 39.8857 31.7162 39.9838C31.6854 40.0819 31.6346 40.1725 31.567 40.25C31.499 40.329 31.4158 40.3935 31.3224 40.4396C31.2289 40.4856 31.127 40.5123 31.023 40.518C29.933 40.6633 28.8409 40.7917 27.747 40.903C27.149 40.963 26.549 40.993 25.947 40.993C25.337 40.993 25.201 40.819 25.269 40.244C25.452 38.77 25.594 37.284 25.839 35.811C26.01 34.767 26.306 33.739 26.551 32.706C26.796 31.673 27.041 30.601 27.297 29.552C27.554 28.502 27.867 27.318 28.135 26.202C28.403 25.085 28.608 23.829 28.835 22.645C28.921 22.193 29.018 21.746 29.069 21.288C29.0609 21.0374 29.0246 20.7885 28.961 20.546H28.96Z'
              fill='white'
            />
          </svg>

          <List
            level='1'
            vehicleTechnologiesAvailability={vehicleTechnologiesAvailability}
          />
        </Column>
        <Column>
          <svg
            width='59'
            height='58'
            viewBox='0 0 59 58'
            fill='none'
            xmlns='http://www.w3.org/2000/svg'
          >
            <path
              d='M29.8 58C45.816 58 58.8 45.016 58.8 29C58.8 12.984 45.816 0 29.8 0C13.783 0 0.800049 12.984 0.800049 29C0.800049 45.016 13.783 58 29.8 58Z'
              fill='white'
            />
            <path
              d='M29.8001 57.171C45.3581 57.171 57.9701 44.558 57.9701 29C57.9711 13.44 45.3601 0.828003 29.8001 0.828003C14.2401 0.828003 1.62805 13.441 1.62805 29C1.62805 44.558 14.2411 57.171 29.8001 57.171Z'
              fill='#EDBE31'
            />
            <path
              d='M29.8 48.591C40.62 48.591 49.392 39.82 49.392 29C49.392 18.18 40.62 9.40802 29.8 9.40802C18.98 9.40802 10.21 18.18 10.21 29C10.21 39.82 18.98 48.591 29.801 48.591H29.8Z'
              fill='#F3DD53'
            />
            <path
              d='M29.8 47.763C40.162 47.763 48.563 39.363 48.563 29C48.563 18.637 40.163 10.237 29.8 10.237C19.437 10.237 11.037 18.637 11.037 29C11.037 39.363 19.437 47.763 29.8 47.763Z'
              fill='#F2D036'
            />
            <path
              d='M25.0809 23.194L23.3999 22.304C23.8499 20.784 24.8449 19.842 25.8559 18.958C27.6798 17.3465 30.0515 16.4945 32.4839 16.577C33.4715 16.5627 34.4504 16.7617 35.3539 17.1606C36.2574 17.5594 37.0641 18.1487 37.7189 18.888C38.9149 20.293 39.0489 21.951 38.7479 23.662C38.3676 25.5183 37.5022 27.2408 36.2399 28.654C35.1359 29.972 34.0199 31.289 32.8249 32.526C31.9409 33.445 30.9289 34.259 29.9349 35.074C29.6809 35.288 29.3579 35.461 29.4959 35.826C29.5619 35.9402 29.6501 36.04 29.7554 36.1194C29.8608 36.1988 29.981 36.2561 30.1089 36.288C31.7339 36.724 33.4029 36.98 35.0839 37.051C35.5455 37.1035 36.0116 37.0058 36.4133 36.7726C36.815 36.5393 37.1308 36.1829 37.3139 35.756C37.3739 35.654 37.4479 35.56 37.5339 35.479C37.6039 35.426 37.6779 35.379 37.7539 35.334L39.1349 35.739C38.6209 37.472 38.5049 39.206 37.2689 40.541C36.8835 40.9467 36.3793 41.2198 35.8289 41.321C34.2726 41.609 32.6647 41.315 31.3109 40.495C30.2759 39.825 29.1669 39.264 28.0859 38.669C27.7835 38.4681 27.4176 38.3859 27.0583 38.4381C26.699 38.4903 26.3717 38.6733 26.1389 38.952C25.4453 39.6108 24.6817 40.1919 23.8619 40.685C23.0709 41.159 22.4749 41.39 21.6719 40.367C21.2849 39.871 20.8459 39.414 20.4819 38.906C20.3448 38.7039 20.2715 38.4653 20.2715 38.221C20.2715 37.9768 20.3448 37.7381 20.4819 37.536C21.5509 35.525 22.8569 34.791 25.2259 35.138C25.5134 35.2127 25.8158 35.2069 26.1001 35.1212C26.3845 35.0355 26.6397 34.8731 26.8379 34.652C29.3399 31.902 31.5709 28.984 32.4079 25.256C32.585 24.3933 32.6242 23.508 32.5239 22.633C32.4606 22.2277 32.3136 21.8401 32.0922 21.4947C31.8708 21.1494 31.5799 20.854 31.238 20.6272C30.8961 20.4005 30.5108 20.2475 30.1065 20.1779C29.7023 20.1083 29.2879 20.1237 28.8899 20.223C27.8328 20.4735 26.8761 21.0375 26.1449 21.841C25.7979 22.281 25.4799 22.691 25.0809 23.193V23.194Z'
              fill='white'
            />
          </svg>

          <List
            level='2'
            vehicleTechnologiesAvailability={vehicleTechnologiesAvailability}
          />
        </Column>
      </Columns>
    </Wrapper>
  ) : null
}
